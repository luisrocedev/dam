<!doctype html>
<html lang="es">
  <head>
    <title>Blog</title>
    <meta charset="utf-8">
    <style>
      body{ /* Estilos generales de toda la web */
        background:darkcyan; /* El fondo es cyan oscuro */
        font-family:sans-serif; /* La letra es de palo */
      }
      header,main,footer{ /* Selecciono tres elementos a la vez */
        padding:20px; /* Margen interior de 20 pixeles */
        margin:auto; /* Lo centro en la pantalla */
        background:white; /* El fondo es blanco */
        width:800px; /* La anchura es de 800 px */
        text-align:center; /* Alinea el texto al centro del renglón */
      }
      article{ /* Estilizo cada uno de los artículos */
        background:lightcyan; /* El fondo es cyan clarito */
        text-align:justify; /* Justifica el texto */
        box-sizing:border-box; /* Crece el margen hacia dentro y no hacia fuera */
        padding:20px; /* El margen es de 20 pixeles */
        margin:10px 0px; /* margen vertical para separar un articulo de otro */
        }
    </style>
  </head>
  <body>
    <header>
      <h1>Blog</h1>
      <h2>El blog de Jose Vicente</h2>
    </header>
    <main>
      <section>
        <!-- Démenos cuenta de que la sección está VACIA -->
      </section>
    </main>
    <footer>
      (c) 2024 Jose Vicente Carratalá
    </footer>
    <script>
      fetch("http://127.0.0.1:5000")                        // Hago una petición al servidor flask de Python
      .then(function(response){                             // Cuando el servidor me responda
        return response.json();                             // Formateo su respuesta como json
      })
      .then(function(entradas){                             // Y cuando esa operación haya concluido
        console.log(entradas)                               // Primero saca las entradas por consola para ver que todo va ok
        entradas.forEach(function(entrada){                 // Para cada una de las entradas
          let seccion = document.querySelector("section")   // Cojo la sección
          seccion.innerHTML += `
            <article>
              <h3>`+entrada.titulo+`</h3>
              <time>`+entrada.fecha+`</time>
              <p>`+entrada.contenido+`</p>
            </article>
          `                                                 // Y entonces a la sección le añado un artículo por cada artículo de la base de datos
        })
      })
    </script>
  </body>
</html>
